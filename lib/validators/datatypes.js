'use strict';

var Promise = require('bluebird');
var util = require('util');
var check = require('check-types');

var dseDriver = void 0;
try {
  // eslint-disable-next-line import/no-extraneous-dependencies, import/no-unresolved
  dseDriver = require('dse-driver');
} catch (e) {
  dseDriver = null;
}

var cql = Promise.promisifyAll(dseDriver || require('cassandra-driver'));

var validators = {};
validators.is_array = function (obj) {
  return check.array(obj);
};
validators.is_object = function (obj) {
  return check.object(obj);
};
validators.is_long = function (obj) {
  return obj instanceof cql.types.Long;
};
validators.is_decimal = function (obj) {
  return obj instanceof cql.types.BigDecimal;
};
validators.is_integer = function (obj) {
  return check.integer(obj);
};
validators.is_var_int = function (obj) {
  return obj instanceof cql.types.Integer;
};
validators.is_boolean = function (obj) {
  return obj === true || obj === false;
};
validators.is_number = function (obj) {
  return check.number(obj);
};
validators.is_string = function (obj) {
  return check.string(obj);
};
validators.is_local_date = function (obj) {
  return obj instanceof cql.types.LocalDate;
};
validators.is_local_time = function (obj) {
  return obj instanceof cql.types.LocalTime;
};
validators.is_date = function (obj) {
  return check.date(new Date(obj));
};
validators.is_buffer = function (obj) {
  return obj instanceof Buffer;
};
validators.is_timeuuid = function (obj) {
  return obj instanceof cql.types.TimeUuid;
};
validators.is_uuid = function (obj) {
  return obj instanceof cql.types.Uuid;
};
validators.is_inet = function (obj) {
  return obj instanceof cql.types.InetAddress;
};
validators.is_frozen = function (obj) {
  return validators.is_array(obj) || validators.is_object(obj);
};
// YugaByte YCQL JSONB Datatype:
validators.is_jsonb = function (obj) {
  return obj.indexOf("\"__$isJSONB\":true}") === obj.length - "\"__$isJSONB\":true}".length;
};

var TYPE_MAP = {
  ascii: { validator: validators.is_string },
  bigint: { validator: validators.is_long },
  blob: { validator: validators.is_buffer },
  boolean: { validator: validators.is_boolean },
  counter: { validator: validators.is_long },
  date: { validator: validators.is_local_date },
  decimal: { validator: validators.is_decimal },
  double: { validator: validators.is_number },
  float: { validator: validators.is_number },
  inet: { validator: validators.is_inet },
  int: { validator: validators.is_integer },
  list: { validator: validators.is_array },
  map: { validator: validators.is_object },
  set: { validator: validators.is_array },
  smallint: { validator: validators.is_integer },
  text: { validator: validators.is_string },
  time: { validator: validators.is_local_time },
  timestamp: { validator: validators.is_date },
  timeuuid: { validator: validators.is_timeuuid },
  tinyint: { validator: validators.is_integer },
  uuid: { validator: validators.is_uuid },
  varchar: { validator: validators.is_string },
  varint: { validator: validators.is_var_int },
  frozen: { validator: validators.is_frozen },

  // YugaByte YCQL JSONB Datatype:
  jsonb: { validator: validators.is_jsonb }
};

TYPE_MAP.generic_type_validator = function f(fieldtype) {
  if (!this[fieldtype]) return null;

  return {
    validator: this[fieldtype].validator,
    message(value, propName, fieldType) {
      return util.format('Invalid Value: "%s" for Field: %s (Type: %s)', value, propName, fieldType);
    },
    type: 'type_validator'
  };
};

module.exports = TYPE_MAP;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWxpZGF0b3JzL2RhdGF0eXBlcy5qcyJdLCJuYW1lcyI6WyJQcm9taXNlIiwicmVxdWlyZSIsInV0aWwiLCJjaGVjayIsImRzZURyaXZlciIsImUiLCJjcWwiLCJwcm9taXNpZnlBbGwiLCJ2YWxpZGF0b3JzIiwiaXNfYXJyYXkiLCJvYmoiLCJhcnJheSIsImlzX29iamVjdCIsIm9iamVjdCIsImlzX2xvbmciLCJ0eXBlcyIsIkxvbmciLCJpc19kZWNpbWFsIiwiQmlnRGVjaW1hbCIsImlzX2ludGVnZXIiLCJpbnRlZ2VyIiwiaXNfdmFyX2ludCIsIkludGVnZXIiLCJpc19ib29sZWFuIiwiaXNfbnVtYmVyIiwibnVtYmVyIiwiaXNfc3RyaW5nIiwic3RyaW5nIiwiaXNfbG9jYWxfZGF0ZSIsIkxvY2FsRGF0ZSIsImlzX2xvY2FsX3RpbWUiLCJMb2NhbFRpbWUiLCJpc19kYXRlIiwiZGF0ZSIsIkRhdGUiLCJpc19idWZmZXIiLCJCdWZmZXIiLCJpc190aW1ldXVpZCIsIlRpbWVVdWlkIiwiaXNfdXVpZCIsIlV1aWQiLCJpc19pbmV0IiwiSW5ldEFkZHJlc3MiLCJpc19mcm96ZW4iLCJpc19qc29uYiIsImluZGV4T2YiLCJsZW5ndGgiLCJUWVBFX01BUCIsImFzY2lpIiwidmFsaWRhdG9yIiwiYmlnaW50IiwiYmxvYiIsImJvb2xlYW4iLCJjb3VudGVyIiwiZGVjaW1hbCIsImRvdWJsZSIsImZsb2F0IiwiaW5ldCIsImludCIsImxpc3QiLCJtYXAiLCJzZXQiLCJzbWFsbGludCIsInRleHQiLCJ0aW1lIiwidGltZXN0YW1wIiwidGltZXV1aWQiLCJ0aW55aW50IiwidXVpZCIsInZhcmNoYXIiLCJ2YXJpbnQiLCJmcm96ZW4iLCJqc29uYiIsImdlbmVyaWNfdHlwZV92YWxpZGF0b3IiLCJmIiwiZmllbGR0eXBlIiwibWVzc2FnZSIsInZhbHVlIiwicHJvcE5hbWUiLCJmaWVsZFR5cGUiLCJmb3JtYXQiLCJ0eXBlIiwibW9kdWxlIiwiZXhw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VyxFQUFFaEIsV0FBV3pDLFdBQVd3QixPQUF4QixFQWxCSTtBQW1CZmtDLFlBQVUsRUFBRWpCLFdBQVd6QyxXQUFXNkIsV0FBeEIsRUFuQks7QUFvQmY4QixXQUFTLEVBQUVsQixXQUFXekMsV0FBV1csVUFBeEIsRUFwQk07QUFxQmZpRCxRQUFNLEVBQUVuQixXQUFXekMsV0FBVytCLE9BQXhCLEVBckJTO0FBc0JmOEIsV0FBUyxFQUFFcEIsV0FBV3pDLFdBQVdrQixTQUF4QixFQXRCTTtBQXVCZjRDLFVBQVEsRUFBRXJCLFdBQVd6QyxXQUFXYSxVQUF4QixFQXZCTztBQXdCZmtELFVBQVEsRUFBRXRCLFdBQVd6QyxXQUFXbUMsU0FBeEIsRUF4Qk87O0FBMEJmO0FBQ0E2QixTQUFPLEVBQUV2QixXQUFXekMsV0FBV29DLFFBQXhCO0FBM0JRLENBQWpCOztBQStCQUcsU0FBUzBCLHNCQUFULEdBQWtDLFNBQVNDLENBQVQsQ0FBV0MsU0FBWCxFQUFzQjtBQUN0RCxNQUFJLENBQUMsS0FBS0EsU0FBTCxDQUFMLEVBQXNCLE9BQU8sSUFBUDs7QUFFdEIsU0FBTztBQUNMMUIsZUFBVyxLQUFLMEIsU0FBTCxFQUFnQjFCLFNBRHRCO0FBRUwyQixZQUFRQyxLQUFSLEVBQWVDLFFBQWYsRUFBeUJDLFNBQXpCLEVBQW9DO0FBQ2xDLGFBQU83RSxLQUFLOEUsTUFBTCxDQUFZLDhDQUFaLEVBQTRESCxLQUE1RCxFQUFtRUMsUUFBbkUsRUFBNkVDLFNBQTdFLENBQVA7QUFDRCxLQUpJO0FBS0xFLFVBQU07QUFMRCxHQUFQO0FBT0QsQ0FWRDs7QUFZQUMsT0FBT0MsT0FBUCxHQUFpQnBDLFFBQWpCIiwiZmlsZSI6ImRhdGF0eXBlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbmNvbnN0IGNoZWNrID0gcmVxdWlyZSgnY2hlY2stdHlwZXMnKTtcblxubGV0IGRzZURyaXZlcjtcbnRyeSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMsIGltcG9ydC9uby11bnJlc29sdmVkXG4gIGRzZURyaXZlciA9IHJlcXVpcmUoJ2RzZS1kcml2ZXInKTtcbn0gY2F0Y2ggKGUpIHtcbiAgZHNlRHJpdmVyID0gbnVsbDtcbn1cblxuY29uc3QgY3FsID0gUHJvbWlzZS5wcm9taXNpZnlBbGwoZHNlRHJpdmVyIHx8IHJlcXVpcmUoJ2Nhc3NhbmRyYS1kcml2ZXInKSk7XG5cbmNvbnN0IHZhbGlkYXRvcnMgPSB7fTtcbnZhbGlkYXRvcnMuaXNfYXJyYXkgPSAob2JqKSA9PiAoY2hlY2suYXJyYXkob2JqKSk7XG52YWxpZGF0b3JzLmlzX29iamVjdCA9IChvYmopID0+IChjaGVjay5vYmplY3Qob2JqKSk7XG52YWxpZGF0b3JzLmlzX2xvbmcgPSAob2JqKSA9PiAoKG9iaiBpbnN0YW5jZW9mIGNxbC50eXBlcy5Mb25nKSk7XG52YWxpZGF0b3JzLmlzX2RlY2ltYWwgPSAob2JqKSA9PiAoKG9iaiBpbnN0YW5jZW9mIGNxbC50eXBlcy5CaWdEZWNpbWFsKSk7XG52YWxpZGF0b3JzLmlzX2ludGVnZXIgPSAob2JqKSA9PiAoY2hlY2suaW50ZWdlcihvYmopKTtcbnZhbGlkYXRvcnMuaXNfdmFyX2ludCA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkludGVnZXIpKTtcbnZhbGlkYXRvcnMuaXNfYm9vbGVhbiA9IChvYmopID0+ICgob2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UpKTtcbnZhbGlkYXRvcnMuaXNfbnVtYmVyID0gKG9iaikgPT4gKGNoZWNrLm51bWJlcihvYmopKTtcbnZhbGlkYXRvcnMuaXNfc3RyaW5nID0gKG9iaikgPT4gKGNoZWNrLnN0cmluZyhvYmopKTtcbnZhbGlkYXRvcnMuaXNfbG9jYWxfZGF0ZSA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkxvY2FsRGF0ZSkpO1xudmFsaWRhdG9ycy5pc19sb2NhbF90aW1lID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuTG9jYWxUaW1lKSk7XG52YWxpZGF0b3JzLmlzX2RhdGUgPSAob2JqKSA9PiAoY2hlY2suZGF0ZShuZXcgRGF0ZShvYmopKSk7XG52YWxpZGF0b3JzLmlzX2J1ZmZlciA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgQnVmZmVyKSk7XG52YWxpZGF0b3JzLmlzX3RpbWV1dWlkID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuVGltZVV1aWQpKTtcbnZhbGlkYXRvcnMuaXNfdXVpZCA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLlV1aWQpKTtcbnZhbGlkYXRvcnMuaXNfaW5ldCA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkluZXRBZGRyZXNzKSk7XG52YWxpZGF0b3JzLmlzX2Zyb3plbiA9IChvYmopID0+ICgodmFsaWRhdG9ycy5pc19hcnJheShvYmopIHx8IHZhbGlkYXRvcnMuaXNfb2JqZWN0KG9iaikpKTtcbi8vIFl1Z2FCeXRlIFlDUUwgSlNPTkIgRGF0YXR5cGU6XG52YWxpZGF0b3JzLmlzX2pzb25iID0gKG9iaikgPT4gKG9iai5pbmRleE9mKFwiXFxcIl9fJGlzSlNPTkJcXFwiOnRydWV9XCIpID09PSBvYmoubGVuZ3RoIC0gXCJcXFwiX18kaXNKU09OQlxcXCI6dHJ1ZX1cIi5sZW5ndGgpO1xuXG5jb25zdCBUWVBFX01BUCA9IHtcbiAgYXNjaWk6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3N0cmluZyB9LFxuICBiaWdpbnQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2xvbmcgfSxcbiAgYmxvYjogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfYnVmZmVyIH0sXG4gIGJvb2xlYW46IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2Jvb2xlYW4gfSxcbiAgY291bnRlcjogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfbG9uZyB9LFxuICBkYXRlOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19sb2NhbF9kYXRlIH0sXG4gIGRlY2ltYWw6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2RlY2ltYWwgfSxcbiAgZG91YmxlOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19udW1iZXIgfSxcbiAgZmxvYXQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX251bWJlciB9LFxuICBpbmV0OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19pbmV0IH0sXG4gIGludDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfaW50ZWdlciB9LFxuICBsaXN0OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19hcnJheSB9LFxuICBtYXA6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX29iamVjdCB9LFxuICBzZXQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2FycmF5IH0sXG4gIHNtYWxsaW50OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19pbnRlZ2VyIH0sXG4gIHRleHQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3N0cmluZyB9LFxuICB0aW1lOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19sb2NhbF90aW1lIH0sXG4gIHRpbWVzdGFtcDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfZGF0ZSB9LFxuICB0aW1ldXVpZDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfdGltZXV1aWQgfSxcbiAgdGlueWludDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfaW50ZWdlciB9LFxuICB1dWlkOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc191dWlkIH0sXG4gIHZhcmNoYXI6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3N0cmluZyB9LFxuICB2YXJpbnQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3Zhcl9pbnQgfSxcbiAgZnJvemVuOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19mcm96ZW4gfSxcblxuICAvLyBZdWdhQnl0ZSBZQ1FMIEpTT05CIERhdGF0eXBlOlxuICBqc29uYjogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfanNvbmIgfVxufTtcblxuXG5UWVBFX01BUC5nZW5lcmljX3R5cGVfdmFsaWRhdG9yID0gZnVuY3Rpb24gZihmaWVsZHR5cGUpIHtcbiAgaWYgKCF0aGlzW2ZpZWxkdHlwZV0pIHJldHVybiBudWxsO1xuXG4gIHJldHVybiB7XG4gICAgdmFsaWRhdG9yOiB0aGlzW2ZpZWxkdHlwZV0udmFsaWRhdG9yLFxuICAgIG1lc3NhZ2UodmFsdWUsIHByb3BOYW1lLCBmaWVsZFR5cGUpIHtcbiAgICAgIHJldHVybiB1dGlsLmZvcm1hdCgnSW52YWxpZCBWYWx1ZTogXCIlc1wiIGZvciBGaWVsZDogJXMgKFR5cGU6ICVzKScsIHZhbHVlLCBwcm9wTmFtZSwgZmllbGRUeXBlKTtcbiAgICB9LFxuICAgIHR5cGU6ICd0eXBlX3ZhbGlkYXRvcicsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRZUEVfTUFQO1xuIl19