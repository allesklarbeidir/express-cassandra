'use strict';

var Promise = require('bluebird');
var util = require('util');
var check = require('check-types');

var dseDriver = void 0;
try {
  // eslint-disable-next-line import/no-extraneous-dependencies, import/no-unresolved
  dseDriver = require('dse-driver');
} catch (e) {
  dseDriver = null;
}

var cql = Promise.promisifyAll(dseDriver || require('cassandra-driver'));

var validators = {};
validators.is_array = function (obj) {
  return check.array(obj);
};
validators.is_object = function (obj) {
  return check.object(obj);
};
validators.is_long = function (obj) {
  return obj instanceof cql.types.Long;
};
validators.is_decimal = function (obj) {
  return obj instanceof cql.types.BigDecimal;
};
validators.is_integer = function (obj) {
  return check.integer(obj);
};
validators.is_var_int = function (obj) {
  return obj instanceof cql.types.Integer;
};
validators.is_boolean = function (obj) {
  return obj === true || obj === false;
};
validators.is_number = function (obj) {
  return check.number(obj);
};
validators.is_string = function (obj) {
  return check.string(obj);
};
validators.is_local_date = function (obj) {
  return obj instanceof cql.types.LocalDate;
};
validators.is_local_time = function (obj) {
  return obj instanceof cql.types.LocalTime;
};
validators.is_date = function (obj) {
  return check.date(new Date(obj));
};
validators.is_buffer = function (obj) {
  return obj instanceof Buffer;
};
validators.is_timeuuid = function (obj) {
  return obj instanceof cql.types.TimeUuid;
};
validators.is_uuid = function (obj) {
  return obj instanceof cql.types.Uuid;
};
validators.is_inet = function (obj) {
  return obj instanceof cql.types.InetAddress;
};
validators.is_frozen = function (obj) {
  return validators.is_array(obj) || validators.is_object(obj);
};
// YugaByte YCQL JSONB Datatype:
validators.is_jsonb = function (obj) {
  return obj.__$isJSONB;
};

var TYPE_MAP = {
  ascii: { validator: validators.is_string },
  bigint: { validator: validators.is_long },
  blob: { validator: validators.is_buffer },
  boolean: { validator: validators.is_boolean },
  counter: { validator: validators.is_long },
  date: { validator: validators.is_local_date },
  decimal: { validator: validators.is_decimal },
  double: { validator: validators.is_number },
  float: { validator: validators.is_number },
  inet: { validator: validators.is_inet },
  int: { validator: validators.is_integer },
  list: { validator: validators.is_array },
  map: { validator: validators.is_object },
  set: { validator: validators.is_array },
  smallint: { validator: validators.is_integer },
  text: { validator: validators.is_string },
  time: { validator: validators.is_local_time },
  timestamp: { validator: validators.is_date },
  timeuuid: { validator: validators.is_timeuuid },
  tinyint: { validator: validators.is_integer },
  uuid: { validator: validators.is_uuid },
  varchar: { validator: validators.is_string },
  varint: { validator: validators.is_var_int },
  frozen: { validator: validators.is_frozen },

  // YugaByte YCQL JSONB Datatype:
  jsonb: { validator: validators.is_jsonb }
};

TYPE_MAP.generic_type_validator = function f(fieldtype) {
  if (!this[fieldtype]) return null;

  return {
    validator: this[fieldtype].validator,
    message(value, propName, fieldType) {
      return util.format('Invalid Value: "%s" for Field: %s (Type: %s)', value, propName, fieldType);
    },
    type: 'type_validator'
  };
};

module.exports = TYPE_MAP;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWxpZGF0b3JzL2RhdGF0eXBlcy5qcyJdLCJuYW1lcyI6WyJQcm9taXNlIiwicmVxdWlyZSIsInV0aWwiLCJjaGVjayIsImRzZURyaXZlciIsImUiLCJjcWwiLCJwcm9taXNpZnlBbGwiLCJ2YWxpZGF0b3JzIiwiaXNfYXJyYXkiLCJvYmoiLCJhcnJheSIsImlzX29iamVjdCIsIm9iamVjdCIsImlzX2xvbmciLCJ0eXBlcyIsIkxvbmciLCJpc19kZWNpbWFsIiwiQmlnRGVjaW1hbCIsImlzX2ludGVnZXIiLCJpbnRlZ2VyIiwiaXNfdmFyX2ludCIsIkludGVnZXIiLCJpc19ib29sZWFuIiwiaXNfbnVtYmVyIiwibnVtYmVyIiwiaXNfc3RyaW5nIiwic3RyaW5nIiwiaXNfbG9jYWxfZGF0ZSIsIkxvY2FsRGF0ZSIsImlzX2xvY2FsX3RpbWUiLCJMb2NhbFRpbWUiLCJpc19kYXRlIiwiZGF0ZSIsIkRhdGUiLCJpc19idWZmZXIiLCJCdWZmZXIiLCJpc190aW1ldXVpZCIsIlRpbWVVdWlkIiwiaXNfdXVpZCIsIlV1aWQiLCJpc19pbmV0IiwiSW5ldEFkZHJlc3MiLCJpc19mcm96ZW4iLCJpc19qc29uYiIsIl9fJGlzSlNPTkIiLCJUWVBFX01BUCIsImFzY2lpIiwidmFsaWRhdG9yIiwiYmlnaW50IiwiYmxvYiIsImJvb2xlYW4iLCJjb3VudGVyIiwiZGVjaW1hbCIsImRvdWJsZSIsImZsb2F0IiwiaW5ldCIsImludCIsImxpc3QiLCJtYXAiLCJzZXQiLCJzbWFsbGludCIsInRleHQiLCJ0aW1lIiwidGltZXN0YW1wIiwidGltZXV1aWQiLCJ0aW55aW50IiwidXVpZCIsInZhcmNoYXIiLCJ2YXJpbnQiLCJmcm96ZW4iLCJqc29uYiIsImdlbmVyaWNfdHlwZV92YWxpZGF0b3IiLCJmIiwiZmllbGR0eXBlIiwibWVzc2FnZSIsInZhbHVlIiwicHJvcE5hbWUiLCJmaWVsZFR5cGUiLCJmb3JtYXQiLCJ0eXBlIiwibW9kdWxlIiwiZXhwb3J0cyJd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QVd4QyxXQUFXNkIsV0FBeEIsRUFuQks7QUFvQmY2QixXQUFTLEVBQUVsQixXQUFXeEMsV0FBV1csVUFBeEIsRUFwQk07QUFxQmZnRCxRQUFNLEVBQUVuQixXQUFXeEMsV0FBVytCLE9BQXhCLEVBckJTO0FBc0JmNkIsV0FBUyxFQUFFcEIsV0FBV3hDLFdBQVdrQixTQUF4QixFQXRCTTtBQXVCZjJDLFVBQVEsRUFBRXJCLFdBQVd4QyxXQUFXYSxVQUF4QixFQXZCTztBQXdCZmlELFVBQVEsRUFBRXRCLFdBQVd4QyxXQUFXbUMsU0FBeEIsRUF4Qk87O0FBMEJmO0FBQ0E0QixTQUFPLEVBQUV2QixXQUFXeEMsV0FBV29DLFFBQXhCO0FBM0JRLENBQWpCOztBQStCQUUsU0FBUzBCLHNCQUFULEdBQWtDLFNBQVNDLENBQVQsQ0FBV0MsU0FBWCxFQUFzQjtBQUN0RCxNQUFJLENBQUMsS0FBS0EsU0FBTCxDQUFMLEVBQXNCLE9BQU8sSUFBUDs7QUFFdEIsU0FBTztBQUNMMUIsZUFBVyxLQUFLMEIsU0FBTCxFQUFnQjFCLFNBRHRCO0FBRUwyQixZQUFRQyxLQUFSLEVBQWVDLFFBQWYsRUFBeUJDLFNBQXpCLEVBQW9DO0FBQ2xDLGFBQU81RSxLQUFLNkUsTUFBTCxDQUFZLDhDQUFaLEVBQTRESCxLQUE1RCxFQUFtRUMsUUFBbkUsRUFBNkVDLFNBQTdFLENBQVA7QUFDRCxLQUpJO0FBS0xFLFVBQU07QUFMRCxHQUFQO0FBT0QsQ0FWRDs7QUFZQUMsT0FBT0MsT0FBUCxHQUFpQnBDLFFBQWpCIiwiZmlsZSI6ImRhdGF0eXBlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuY29uc3QgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbmNvbnN0IGNoZWNrID0gcmVxdWlyZSgnY2hlY2stdHlwZXMnKTtcblxubGV0IGRzZURyaXZlcjtcbnRyeSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMsIGltcG9ydC9uby11bnJlc29sdmVkXG4gIGRzZURyaXZlciA9IHJlcXVpcmUoJ2RzZS1kcml2ZXInKTtcbn0gY2F0Y2ggKGUpIHtcbiAgZHNlRHJpdmVyID0gbnVsbDtcbn1cblxuY29uc3QgY3FsID0gUHJvbWlzZS5wcm9taXNpZnlBbGwoZHNlRHJpdmVyIHx8IHJlcXVpcmUoJ2Nhc3NhbmRyYS1kcml2ZXInKSk7XG5cbmNvbnN0IHZhbGlkYXRvcnMgPSB7fTtcbnZhbGlkYXRvcnMuaXNfYXJyYXkgPSAob2JqKSA9PiAoY2hlY2suYXJyYXkob2JqKSk7XG52YWxpZGF0b3JzLmlzX29iamVjdCA9IChvYmopID0+IChjaGVjay5vYmplY3Qob2JqKSk7XG52YWxpZGF0b3JzLmlzX2xvbmcgPSAob2JqKSA9PiAoKG9iaiBpbnN0YW5jZW9mIGNxbC50eXBlcy5Mb25nKSk7XG52YWxpZGF0b3JzLmlzX2RlY2ltYWwgPSAob2JqKSA9PiAoKG9iaiBpbnN0YW5jZW9mIGNxbC50eXBlcy5CaWdEZWNpbWFsKSk7XG52YWxpZGF0b3JzLmlzX2ludGVnZXIgPSAob2JqKSA9PiAoY2hlY2suaW50ZWdlcihvYmopKTtcbnZhbGlkYXRvcnMuaXNfdmFyX2ludCA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkludGVnZXIpKTtcbnZhbGlkYXRvcnMuaXNfYm9vbGVhbiA9IChvYmopID0+ICgob2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UpKTtcbnZhbGlkYXRvcnMuaXNfbnVtYmVyID0gKG9iaikgPT4gKGNoZWNrLm51bWJlcihvYmopKTtcbnZhbGlkYXRvcnMuaXNfc3RyaW5nID0gKG9iaikgPT4gKGNoZWNrLnN0cmluZyhvYmopKTtcbnZhbGlkYXRvcnMuaXNfbG9jYWxfZGF0ZSA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkxvY2FsRGF0ZSkpO1xudmFsaWRhdG9ycy5pc19sb2NhbF90aW1lID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuTG9jYWxUaW1lKSk7XG52YWxpZGF0b3JzLmlzX2RhdGUgPSAob2JqKSA9PiAoY2hlY2suZGF0ZShuZXcgRGF0ZShvYmopKSk7XG52YWxpZGF0b3JzLmlzX2J1ZmZlciA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgQnVmZmVyKSk7XG52YWxpZGF0b3JzLmlzX3RpbWV1dWlkID0gKG9iaikgPT4gKChvYmogaW5zdGFuY2VvZiBjcWwudHlwZXMuVGltZVV1aWQpKTtcbnZhbGlkYXRvcnMuaXNfdXVpZCA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLlV1aWQpKTtcbnZhbGlkYXRvcnMuaXNfaW5ldCA9IChvYmopID0+ICgob2JqIGluc3RhbmNlb2YgY3FsLnR5cGVzLkluZXRBZGRyZXNzKSk7XG52YWxpZGF0b3JzLmlzX2Zyb3plbiA9IChvYmopID0+ICgodmFsaWRhdG9ycy5pc19hcnJheShvYmopIHx8IHZhbGlkYXRvcnMuaXNfb2JqZWN0KG9iaikpKTtcbi8vIFl1Z2FCeXRlIFlDUUwgSlNPTkIgRGF0YXR5cGU6XG52YWxpZGF0b3JzLmlzX2pzb25iID0gKG9iaikgPT4gKG9iai5fXyRpc0pTT05CKTtcblxuY29uc3QgVFlQRV9NQVAgPSB7XG4gIGFzY2lpOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19zdHJpbmcgfSxcbiAgYmlnaW50OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19sb25nIH0sXG4gIGJsb2I6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2J1ZmZlciB9LFxuICBib29sZWFuOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19ib29sZWFuIH0sXG4gIGNvdW50ZXI6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2xvbmcgfSxcbiAgZGF0ZTogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfbG9jYWxfZGF0ZSB9LFxuICBkZWNpbWFsOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19kZWNpbWFsIH0sXG4gIGRvdWJsZTogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfbnVtYmVyIH0sXG4gIGZsb2F0OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19udW1iZXIgfSxcbiAgaW5ldDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfaW5ldCB9LFxuICBpbnQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2ludGVnZXIgfSxcbiAgbGlzdDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfYXJyYXkgfSxcbiAgbWFwOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19vYmplY3QgfSxcbiAgc2V0OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19hcnJheSB9LFxuICBzbWFsbGludDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfaW50ZWdlciB9LFxuICB0ZXh0OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19zdHJpbmcgfSxcbiAgdGltZTogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfbG9jYWxfdGltZSB9LFxuICB0aW1lc3RhbXA6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2RhdGUgfSxcbiAgdGltZXV1aWQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX3RpbWV1dWlkIH0sXG4gIHRpbnlpbnQ6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2ludGVnZXIgfSxcbiAgdXVpZDogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfdXVpZCB9LFxuICB2YXJjaGFyOiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc19zdHJpbmcgfSxcbiAgdmFyaW50OiB7IHZhbGlkYXRvcjogdmFsaWRhdG9ycy5pc192YXJfaW50IH0sXG4gIGZyb3plbjogeyB2YWxpZGF0b3I6IHZhbGlkYXRvcnMuaXNfZnJvemVuIH0sXG5cbiAgLy8gWXVnYUJ5dGUgWUNRTCBKU09OQiBEYXRhdHlwZTpcbiAganNvbmI6IHsgdmFsaWRhdG9yOiB2YWxpZGF0b3JzLmlzX2pzb25iIH1cbn07XG5cblxuVFlQRV9NQVAuZ2VuZXJpY190eXBlX3ZhbGlkYXRvciA9IGZ1bmN0aW9uIGYoZmllbGR0eXBlKSB7XG4gIGlmICghdGhpc1tmaWVsZHR5cGVdKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHZhbGlkYXRvcjogdGhpc1tmaWVsZHR5cGVdLnZhbGlkYXRvcixcbiAgICBtZXNzYWdlKHZhbHVlLCBwcm9wTmFtZSwgZmllbGRUeXBlKSB7XG4gICAgICByZXR1cm4gdXRpbC5mb3JtYXQoJ0ludmFsaWQgVmFsdWU6IFwiJXNcIiBmb3IgRmllbGQ6ICVzIChUeXBlOiAlcyknLCB2YWx1ZSwgcHJvcE5hbWUsIGZpZWxkVHlwZSk7XG4gICAgfSxcbiAgICB0eXBlOiAndHlwZV92YWxpZGF0b3InLFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBUWVBFX01BUDtcbiJdfQ==